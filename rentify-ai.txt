rentify-ai/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                      # Archivos originales (AppFolio, CSVs sin procesar)
â”‚   â”œâ”€â”€ clean/                    # Datos normalizados y listos para conciliaciÃ³n
â”‚   â”œâ”€â”€ master/                   # Dataset consolidado (statements unificados + allocations finales)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ ingestion/                # Scripts para leer, limpiar y preparar datos
â”‚   â”‚   â”œâ”€â”€ normalize_gl_accounts.py
â”‚   â”‚   â”œâ”€â”€ unify_statements.py        # Unificar todos los statements en uno solo
â”‚   â”‚   â””â”€â”€ create_allocations.py      # Crear allocations segÃºn reglas de negocio
â”‚   â”œâ”€â”€ fuzzy_match/              # Scripts para bÃºsquedas aproximadas y conciliaciÃ³n difusa
â”‚   â”‚   â””â”€â”€ match_transactions.py      # Ejemplo: emparejar movimientos Amex con notas usando fuzzy matching
â”‚   â””â”€â”€ utils/                    # Funciones compartidas (normalizaciÃ³n, logging, etc.)
â”‚       â””â”€â”€ text_cleaning.py


# Crear los allocations que sean necesarios

- Fuente oficial de informaciÃ³n (Richard Libutti)
- La columna Company enviada por Richard Libutti se considera la fuente oficial de datos.
- Esta columna puede incluir propiedades tanto de Richard Libutti como de Armando Armas.
- El sistema debe clasificar y validar cada transacciÃ³n segÃºn el propietario correcto, usando la columna GL como referencia cruzada.
- ValidaciÃ³n con columna GL
- La columna GL contiene informaciÃ³n adicional sobre las propiedades.
- Se debe usar para confirmar la propiedad y evitar asignaciones errÃ³neas entre Richard y Armando.
- RestricciÃ³n de transacciones para Happy Trailers HRS
- Richard Libutti no realiza transacciones para la compaÃ±Ã­a Happy Trailers HRS.
- Regla: cualquier transacciÃ³n que aparezca con Richard Libutti y Happy Trailers HRS debe marcarse como excepciÃ³n.
- Transacciones de RR Reiter Realty
- Algunas transacciones de RR Reiter Realty son pagadas con RAS.
- Regla: se debe revisar y validar que el mÃ©todo de pago (RAS) estÃ© correctamente registrado y conciliado.
- Si el pago no corresponde, se marca como alerta de validaciÃ³n.

Motor de ConciliaciÃ³n y ValidaciÃ³n de Pagos (AMEX/Citi)
Este script procesa las transacciones normalizadas de tarjetas de crÃ©dito para generar archivos de carga masiva (Bulk Bills) compatibles con AppFolio. Su funciÃ³n principal es actuar como un filtro de auditorÃ­a inteligente que aplica reglas de negocio contables antes de autorizar cualquier pago.

ðŸš€ Funcionalidades Principales
1. Sistema de Reglas de Negocio (AuditorÃ­a de Richard Libutti)
El script no solo mueve datos, sino que valida la integridad de cada transacciÃ³n mediante tres niveles de control:

ValidaciÃ³n de Titularidad: Identifica automÃ¡ticamente a los miembros del equipo core (Armando Armas, Richard Libutti, Cory Reiter, etc.).

Filtro de Excepciones (Happy Trailers HRS): Bloquea automÃ¡ticamente transacciones donde Richard Libutti aparezca vinculado a la compaÃ±Ã­a "Happy Trailers HRS", ya que contablemente se ha definido que Ã©l no opera dicha entidad.

Alertas de ConciliaciÃ³n (RR Reiter Realty): Marca como ALERT cualquier transacciÃ³n de la empresa "RR Reiter Realty" que no tenga el identificador de pago RAS en las columnas de compaÃ±Ã­a o cuenta GL.

2. RecuperaciÃ³n de Datos de Armando Armas
A diferencia de procesos anteriores que dependÃ­an exclusivamente de la etiqueta "RAS", este motor prioriza la identidad del titular. Si una transacciÃ³n pertenece a Armando Armas, el sistema la procesa independientemente de las etiquetas del statement, asegurando que no se pierdan cargos legÃ­timos (como la validaciÃ³n de montos especÃ­ficos de 69.97).

3. Inteligencia de Neteado (Netting)
El script realiza una suma matemÃ¡tica de cargos y crÃ©ditos (devoluciones) bajo las siguientes condiciones:

Agrupa por fecha, comercio, vendedor resuelto y propiedad.

DiferenciaciÃ³n de estatus: No mezcla transacciones marcadas como OK con aquellas marcadas como ALERT, permitiendo una revisiÃ³n clara en el archivo de salida.

Elimina balances de $0.00 provenientes de cancelaciones inmediatas.

4. ResoluciÃ³n de Entidades (Fuzzy Match)
Utiliza algoritmos de lÃ³gica difusa para:

Vendedores: Mapear nombres sucios del banco (ej. "THE HOME DEPOT #123") a nombres limpios del directorio oficial.

Propiedades: Asignar cada gasto al cÃ³digo de propiedad correcto en AppFolio basado en la cuenta GL y reglas de mapeo.

Cuentas Cash: Determina automÃ¡ticamente la cuenta de salida (AMEX o Mastercard) segÃºn el archivo de origen.

ðŸ“Š Formato de Salida (AppFolio Ready)
El archivo generado en data/clean/appfolio_ras_bulk_bill_*.csv incluye una columna de Description enriquecida:

Ejemplo: AMEX | THE HOME DEPOT | ALERT - RR Reiter pagado sin marca RAS

Esto permite que el equipo contable visualice el resultado de la auditorÃ­a directamente en el software financiero antes de aprobar el pago.
